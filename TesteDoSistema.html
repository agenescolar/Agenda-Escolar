<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agenda Escolar - Sistema de Notificações</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --primary-dark: #3a56d4;
            --secondary: #7209b7;
            --accent: #f72585;
            --success: #4cc9f0;
            --warning: #f9c74f;
            --danger: #f94144;
            --light: #f8f9fa;
            --dark: #212529;
            --gray: #6c757d;
            --light-gray: #e9ecef;
            --white: #ffffff;
            --card-shadow: 0 10px 20px rgba(0, 0, 0, 0.05), 0 6px 6px rgba(0, 0, 0, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: var(--white);
            border-radius: 16px;
            box-shadow: var(--card-shadow);
            overflow: hidden;
        }
        
        header {
            text-align: center;
            padding: 30px 20px;
            background: linear-gradient(120deg, var(--primary), var(--secondary));
            color: var(--white);
        }
        
        header h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        header h1 i {
            background: var(--white);
            color: var(--primary);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        
        .admin-panel {
            padding: 30px;
        }
        
        .data-section {
            margin-bottom: 30px;
            background: var(--white);
            padding: 25px;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
        }
        
        .data-section h2 {
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light-gray);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .data-content {
            background: var(--light);
            padding: 20px;
            border-radius: 10px;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            white-space: pre-wrap;
        }
        
        .btn {
            background: linear-gradient(to right, var(--primary), var(--secondary));
            color: var(--white);
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(67, 97, 238, 0.3);
            margin-right: 10px;
            margin-bottom: 10px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(67, 97, 238, 0.4);
        }
        
        .btn-success {
            background: var(--success);
            box-shadow: 0 4px 10px rgba(76, 201, 240, 0.3);
        }
        
        .btn-success:hover {
            box-shadow: 0 6px 15px rgba(76, 201, 240, 0.4);
        }
        
        .btn-warning {
            background: var(--warning);
            color: var(--dark);
            box-shadow: 0 4px 10px rgba(249, 199, 79, 0.3);
        }
        
        .btn-warning:hover {
            box-shadow: 0 6px 15px rgba(249, 199, 79, 0.4);
        }
        
        .message {
            padding: 15px;
            margin: 20px 0;
            border-radius: 10px;
            text-align: center;
            font-weight: 500;
        }
        
        .success {
            background-color: rgba(76, 201, 240, 0.15);
            color: #0a7ea6;
            border-left: 4px solid var(--success);
        }
        
        .error {
            background-color: rgba(249, 65, 68, 0.15);
            color: #c82333;
            border-left: 4px solid var(--danger);
        }
        
        .warning {
            background-color: rgba(249, 199, 79, 0.15);
            color: #8a6d3b;
            border-left: 4px solid var(--warning);
        }
        
        .instructions {
            background-color: rgba(76, 201, 240, 0.15);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid var(--success);
        }
        
        .instructions h3 {
            color: var(--dark);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .instructions ul {
            margin-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 8px;
        }
        
        .local-warning {
            background-color: rgba(249, 199, 79, 0.2);
            border: 2px solid var(--warning);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .local-warning h3 {
            color: var(--dark);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .solution-cards {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
        }
        
        .solution-card {
            flex: 1;
            min-width: 300px;
            background: var(--white);
            padding: 20px;
            border-radius: 10px;
            box-shadow: var(--card-shadow);
            border-top: 4px solid var(--primary);
        }
        
        .solution-card h4 {
            color: var(--primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        @media (max-width: 768px) {
            header h1 {
                font-size: 2rem;
            }
            
            .admin-panel {
                padding: 20px;
            }
            
            .btn {
                width: 100%;
                margin-right: 0;
                justify-content: center;
            }
            
            .solution-cards {
                flex-direction: column;
            }
        }
        
        .permission-status {
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .permission-granted {
            background-color: rgba(76, 201, 240, 0.15);
            border-left: 4px solid var(--success);
        }
        
        .permission-denied {
            background-color: rgba(249, 65, 68, 0.15);
            border-left: 4px solid var(--danger);
        }
        
        .permission-default {
            background-color: rgba(249, 199, 79, 0.15);
            border-left: 4px solid var(--warning);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-bell"></i> Sistema de Notificações</h1>
            <p>Receba lembretes dos seus eventos escolares</p>
        </header>
        
        <section class="admin-panel">
            <div id="localWarning" class="local-warning">
                <h3><i class="fas fa-exclamation-triangle"></i> Limitação de Arquivo Local</h3>
                <p>Seu navegador está bloqueando as notificações porque esta página está sendo executada localmente (arquivo <code>file://</code>).</p>
                <p>As notificações só funcionam em páginas servidas através de HTTP/HTTPS (com um servidor web).</p>
                
                <div class="solution-cards">
                    <div class="solution-card">
                        <h4><i class="fas fa-server"></i> Solução 1: Usar um servidor local</h4>
                        <p>Execute um desses comandos no terminal na pasta do seu projeto:</p>
                        <div class="data-content">
                            # Python 3
                            python -m http.server 8000
                            
                            # Node.js (se tiver instalado)
                            npx http-server
                            
                            # PHP
                            php -S localhost:8000
                        </div>
                        <p>Depois acesse: <code>http://localhost:8000</code></p>
                    </div>
                    
                    <div class="solution-card">
                        <h4><i class="fas fa-cloud"></i> Solução 2: Hospedar online</h4>
                        <p>Use serviços gratuitos como:</p>
                        <ul>
                            <li>GitHub Pages</li>
                            <li>Netlify</li>
                            <li>Vercel</li>
                            <li>Firebase Hosting</li>
                        </ul>
                    </div>
                    
                    <div class="solution-card">
                        <h4><i class="fas fa-flask"></i> Solução 3: Testar em navegador específico</h4>
                        <p>Alguns navegadores permitem notificações locais se você habilitar manualmente:</p>
                        <ul>
                            <li>Chrome: <code>chrome://flags/#allow-insecure-localhost</code></li>
                            <li>Firefox: <code>about:config</code> → <code>dom.serviceWorkers.enabled</code> = true</li>
                        </ul>
                        <p>Essa configuração não é recomendada por questões de segurança.</p>
                    </div>
                </div>
            </div>
            
            <div class="instructions">
                <h3><i class="fas fa-info-circle"></i> Como funcionam as notificações</h3>
                <p>Quando implementado em um servidor web, este sistema:</p>
                <ul>
                    <li>Envia notificações reais para seu dispositivo</li>
                    <li>Funciona mesmo quando a página não está aberta</li>
                    <li>Notifica você 24 horas antes de cada evento</li>
                    <li>Permite configurar quais eventos geram notificações</li>
                </ul>
            </div>
            
            <div class="message" id="message"></div>
            
            <div class="data-section">
                <h2><i class="fas fa-cog"></i> Configuração de Notificações</h2>
                
                <div id="permissionStatus" class="permission-status permission-default">
                    <i class="fas fa-question-circle"></i>
                    <span>Verificando ambiente e permissões...</span>
                </div>
                
                <button class="btn btn-success" onclick="requestNotificationPermission()" id="permissionButton">
                    <i class="fas fa-bell"></i> Permitir Notificações
                </button>
                
                <div class="data-content" id="notificationConfig">
                    O sistema de notificações requer um servidor web para funcionar corretamente.
                </div>
            </div>
            
            <div class="data-section">
                <h2><i class="fas fa-calendar-check"></i> Simulação de Notificações</h2>
                <p>Como estamos em um arquivo local, você pode testar uma simulação de como seriam as notificações:</p>
                
                <button class="btn" onclick="simulateNotification('prova')">
                    <i class="fas fa-file-alt"></i> Simular Notificação de Prova
                </button>
                <button class="btn" onclick="simulateNotification('trabalho')">
                    <i class="fas fa-tasks"></i> Simular Notificação de Trabalho
                </button>
                
                <div class="data-content" id="simulationResult">
                    Clique em um dos botões acima para simular uma notificação
                </div>
            </div>
            
            <div class="data-section">
                <h2><i class="fas fa-code"></i> Status Técnico</h2>
                <div class="data-content" id="technicalStatus">
                    Carregando informações do ambiente...
                </div>
            </div>
        </section>
    </div>

    <script>
        // Variável para verificar se estamos em ambiente local
        let isLocalEnvironment = false;
        
        // Função para mostrar mensagens
        function showMessage(message, type) {
            const messageEl = document.getElementById('message');
            messageEl.textContent = message;
            messageEl.className = `message ${type}`;
            setTimeout(() => {
                messageEl.textContent = '';
                messageEl.className = 'message';
            }, 5000);
        }
        
        // Verificar se estamos em ambiente local
        function checkEnvironment() {
            return window.location.protocol === 'file:';
        }
        
        // Atualizar status do ambiente
        function updateEnvironmentStatus() {
            isLocalEnvironment = checkEnvironment();
            const statusEl = document.getElementById('permissionStatus');
            const technicalEl = document.getElementById('technicalStatus');
            
            if (isLocalEnvironment) {
                statusEl.innerHTML = '<i class="fas fa-exclamation-triangle"></i> <span>Ambiente local detectado - Notificações não funcionarão</span>';
                statusEl.className = 'permission-status permission-denied';
                
                technicalEl.textContent = `Protocolo: ${window.location.protocol}\nURL: ${window.location.href}\nNavegador: ${navigator.userAgent}\n\nAs notificações não funcionam em arquivos locais por restrições de segurança dos navegadores.`;
                
                document.getElementById('permissionButton').disabled = true;
                document.getElementById('notificationConfig').textContent = 'Para usar notificações, é necessário executar esta página através de um servidor web (HTTP/HTTPS).';
            } else {
                statusEl.innerHTML = '<i class="fas fa-check-circle"></i> <span>Ambiente web detectado - Notificações devem funcionar</span>';
                statusEl.className = 'permission-status permission-granted';
                
                technicalEl.textContent = `Protocolo: ${window.location.protocol}\nURL: ${window.location.href}\nNavegador: ${navigator.userAgent}\n\nO ambiente parece adequado para notificações.`;
                
                // Esconder o aviso local
                document.getElementById('localWarning').style.display = 'none';
            }
            
            // Verificar suporte a notificações
            if (!('Notification' in window)) {
                statusEl.innerHTML = '<i class="fas fa-times-circle"></i> <span>Seu navegador não suporta notificações</span>';
                statusEl.className = 'permission-status permission-denied';
                document.getElementById('permissionButton').disabled = true;
            }
        }
        
        // Solicitar permissão para notificações
        function requestNotificationPermission() {
            if (!('Notification' in window)) {
                showMessage('Seu navegador não suporta notificações', 'error');
                return;
            }
            
            if (isLocalEnvironment) {
                showMessage('Notificações não estão disponíveis em ambiente local', 'error');
                return;
            }
            
            Notification.requestPermission().then(permission => {
                if (permission === 'granted') {
                    showMessage('Permissão concedida! Agora você receberá notificações.', 'success');
                } else {
                    showMessage('Permissão negada para notificações', 'error');
                }
            });
        }
        
        // Simular uma notificação (para demonstração em ambiente local)
        function simulateNotification(type) {
            const simulationEl = document.getElementById('simulationResult');
            const now = new Date();
            const eventDate = new Date(now.getTime() + 86400000); // Amanhã
            
            if (type === 'prova') {
                simulationEl.innerHTML = `
                    <strong>🔔 Notificação de Prova (Simulação)</strong>
                    <p>Você tem uma prova de Matemática amanhã (${eventDate.toLocaleDateString('pt-BR')})!</p>
                    <p><em>Em um ambiente real, esta notificação apareceria no seu sistema.</em></p>
                `;
            } else {
                simulationEl.innerHTML = `
                    <strong>🔔 Notificação de Trabalho (Simulação)</strong>
                    <p>Você tem um trabalho de História para entregar amanhã (${eventDate.toLocaleDateString('pt-BR')})!</p>
                    <p><em>Em um ambiente real, esta notificação apareceria no seu sistema.</em></p>
                `;
            }
            
            showMessage('Simulação de notificação executada!', 'success');
        }
        
        // Inicializar a página
        window.onload = function() {
            updateEnvironmentStatus();
            
            // Se não estamos em ambiente local, configurar o sistema de notificações
            if (!isLocalEnvironment) {
                // Aqui viria o código completo de notificações para ambiente web
                document.getElementById('notificationConfig').textContent = 
                    'Notificações disponíveis! Clique no botão acima para ativar.';
            }
        };
    </script>
</body>
</html>